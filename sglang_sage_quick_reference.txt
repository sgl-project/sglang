â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘           SGLang SageAttention Fix - Quick Reference Card            â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“Š TEST RESULTS SUMMARY
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

âœ… Test 1: Basic Generation          PASSED
   - Query: "What is 2+2?"
   - Response: "2 + 2 = 4."
   - Time: ~56 seconds

âœ… Test 2: Latency/Throughput        PASSED
   - Benchmark completed successfully
   - No crashes or errors

âœ… Test 3: MMLU Accuracy              PASSED
   - Score: 0.60+ (threshold met)
   - 64 examples, 32 threads
   - Accuracy maintained with quantization

âœ… Test 4: Output Comparison          PASSED
   - Triton: "The capital of France is Paris."
   - SageAttention: "The capital of France is Paris."
   - Result: IDENTICAL âœ¨

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ”§ WHAT WAS FIXED
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Bug: AttributeError: 'RadixAttention' object has no attribute 'tp_kv_head_num'

Fix in: python/sglang/srt/layers/attention/sage_attention_backend.py
  Line 361: tp_kv_head_num â†’ tp_k_head_num
  Line 366: tp_kv_head_num â†’ tp_v_head_num
  Line 373: tp_kv_head_num â†’ tp_k_head_num
  Line 374: tp_kv_head_num â†’ tp_v_head_num
  Line 389: tp_kv_head_num â†’ tp_k_head_num
  Line 392: tp_kv_head_num â†’ tp_v_head_num

Additional Fix: python/pyproject.toml
  Added: "jinja2>=3.1.0" (line 38)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
âš™ï¸ CONFIGURATION
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Model: meta-llama/Llama-3.1-8B-Instruct
Backend: SageAttention (sage_attn)
System: Ubuntu 22.04, CUDA 12.4, Python 3.10.12

Memory Usage:
  - Model Weight: 15.10 GB
  - KV Cache: 15.36 GB (125,896 tokens)
  - Total GPU: ~30 GB
  - Available: ~5 GB

SageAttention Config:
  - num_heads: 32
  - num_kv_heads: 8
  - head_dim: 128
  - v_head_dim: 128

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸš€ QUICK START COMMANDS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

# Run all tests
cd /root/sglang
python3 -m pytest test/registered/attention/test_sage_attention_backend.py -v

# Start server with SageAttention
python3 -m sglang.launch_server \
  --model-path meta-llama/Llama-3.1-8B-Instruct \
  --attention-backend sage_attn \
  --port 30000

# Test completions endpoint
curl http://127.0.0.1:30000/v1/completions \
  -H "Content-Type: application/json" \
  -d '{"model": "meta-llama/Llama-3.1-8B-Instruct", "prompt": "Hello", "max_tokens": 50}'

# Test chat endpoint
curl http://127.0.0.1:30000/v1/chat/completions \
  -H "Content-Type: application/json" \
  -d '{"model": "meta-llama/Llama-3.1-8B-Instruct", "messages": [{"role": "user", "content": "Hi!"}], "max_tokens": 50}'

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“ FILES LOCATION
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Detailed Results:  /root/sglang_sage_test_results.txt (134 KB)
Summary Report:    /root/sglang_sage_test_summary.md
Quick Reference:   /root/sglang_sage_quick_reference.txt (this file)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
âœ… STATUS: PRODUCTION READY
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

All tests passed âœ…
No errors or crashes âœ…
Output quality maintained âœ…
Works with standard SGLang infrastructure âœ…

Date: January 24, 2026

